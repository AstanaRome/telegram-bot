# Tomorrow School Telegram Bot

–ü—Ä–æ—Å—Ç–æ–π –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å—á–∏—Ç–∞–µ—Ç –≤—Ä–µ–º—è —É—á–µ–±–Ω—ã—Ö —Å–µ—Å—Å–∏–π –∑–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—É—é –Ω–µ–¥–µ–ª—é (–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫¬†‚Äì –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ) –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É. –î–∞–Ω–Ω—ã–µ –∂–∏–≤—É—Ç –≤ PostgreSQL, –ø–æ—ç—Ç–æ–º—É –Ω–µ –ø—Ä–æ–ø–∞–¥–∞—é—Ç –ø–æ—Å–ª–µ —Ä–µ—Å—Ç–∞—Ä—Ç–æ–≤ Railway.

## –ß—Ç–æ –Ω—É–∂–Ω–æ

- Python 3.10+ (–Ω–∞ Railway —Ñ–∏–∫—Å–∏—Ä—É–µ–º —á–µ—Ä–µ–∑ `runtime.txt`)
- –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ –∏–∑ [@BotFather](https://t.me/BotFather)
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: `pip install -r requirements.txt`
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
  - `TELEGRAM_BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
  - `DATABASE_URL` ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL (`postgresql://user:pass@host:port/db`). –ù–∞ Railway –∫–æ–ø–∏—Ä—É–π –∏–º–µ–Ω–Ω–æ `DATABASE_PUBLIC_URL`, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π `postgres.railway.internal` –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.
  - `BOT_TIMEZONE` ‚Äî (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `Asia/Almaty` (–ê—Å—Ç–∞–Ω–∞)

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏ ¬´–ù–∞—á–∞—Ç—å —Å–µ—Å—Å–∏—é¬ª, ¬´–ó–∞–∫–æ–Ω—á–∏—Ç—å —Å–µ—Å—Å–∏—é¬ª, ¬´–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ–¥–µ–ª–∏¬ª, ¬´–¢–µ–∫—É—â–∞—è —Å–µ—Å—Å–∏—è¬ª
- –£—á—ë—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏ —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ —Å–µ–∫—É–Ω–¥
- –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü–µ `sessions` –≤ PostgreSQL
- –ê–≤—Ç–æ‚Äë–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±—ã–ª –Ω–∞–∂–∞—Ç—å —Å—Ç–æ–ø –ø–µ—Ä–µ–¥ –Ω–æ–≤—ã–º —Å—Ç–∞—Ä—Ç–æ–º
- –ü–æ–¥—Å—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏ —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ–∫—É—â–µ–π –Ω–µ–¥–µ–ª–∏ (–ø–æ–Ω-–í—Å) + –ø–æ–¥—Ä–æ–±–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π –Ω–µ–¥–µ–ª–∏ –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ
- –û—Ç–¥–µ–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ ¬´–¢–µ–∫—É—â–∞—è —Å–µ—Å—Å–∏—è¬ª –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∫–æ–ª—å–∫–æ –¥–ª–∏—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–∞–π–º–µ—Ä
- –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ª–∏–±–æ –∫–Ω–æ–ø–∫–∏ ¬´–î–æ–±–∞–≤–∏—Ç—å/–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/–£–¥–∞–ª–∏—Ç—å¬ª —Å –ø–æ—à–∞–≥–æ–≤—ã–º –≤–≤–æ–¥–æ–º (–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ ID –∑–∞ —Ä–∞–∑), –ª–∏–±–æ –∫–æ–º–∞–Ω–¥—ã `/add_session`, `/edit_session`, `/delete_session`

## –ó–∞–ø—É—Å–∫

```bash
export TELEGRAM_BOT_TOKEN=...
export DATABASE_URL=postgresql://...
python bot.py
```

## –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- `/add_session 2024-05-18 09:00 2024-05-18 11:00` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Å–µ—Å—Å–∏—é –≤—Ä—É—á–Ω—É—é (—Ñ–æ—Ä–º–∞—Ç `YYYY-MM-DD HH:MM`)
- `/edit_session 42 2024-05-18 10:00 2024-05-18 12:30` ‚Äî –ø—Ä–∞–≤–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–µ—Å—Å–∏–∏ –ø–æ ID
- `/delete_session 42` –∏–ª–∏ `/delete_session 42,57,61` ‚Äî —É–¥–∞–ª–∏—Ç—å –æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Å—Å–∏–π

ID –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ `/stats` (—Å—Ç—Ä–æ–∫–∏ –≤–∏–¥–∞ `1. #42 ...`). –¢–µ –∂–µ –¥–µ–π—Å—Ç–≤–∏—è –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏ ¬´‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é¬ª, ¬´‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å¬ª, ¬´üóë –£–¥–∞–ª–∏—Ç—å¬ª ‚Äî –±–æ—Ç –ø–æ–ø—Ä–æ—Å–∏—Ç –Ω—É–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ—à–∞–≥–æ–≤–æ, –∞ –∫–Ω–æ–ø–∫–∞ ¬´‚ùå –û—Ç–º–µ–Ω–∞¬ª –æ—Ç–º–µ–Ω–∏—Ç –≤–≤–æ–¥.

### Railway —à–ø–∞—Ä–≥–∞–ª–∫–∞

1. –ó–∞–ª–µ–π –∫–æ–¥ –≤ GitHub.
2. –í Railway —Å–æ–∑–¥–∞–π –ø—Ä–æ–µ–∫—Ç ‚Üí ‚ÄúDeploy from GitHub repo‚Äù.
3. –î–æ–±–∞–≤—å —Å–µ—Ä–≤–∏—Å ‚ÄúPostgreSQL‚Äù –∏ —Å–∫–æ–ø–∏—Ä—É–π –µ–≥–æ `Postgres Connection URL`.
4. –í Variables —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–¥–∞–π:
   - `TELEGRAM_BOT_TOKEN`
   - `DATABASE_URL` (–∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —à–∞–≥–∞)
   - `PYTHON_VERSION=3.11`
5. –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —É–∂–µ –µ—Å—Ç—å `runtime.txt`, –ø–æ—ç—Ç–æ–º—É Railway —Å–æ–±–µ—Ä—ë—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–∞ Python¬†3.11. –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ ‚Äî `python bot.py`.
6. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è —Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏: –±–æ—Ç –¥–æ–ª–∂–µ–Ω –Ω–∞–ø–∏—Å–∞—Ç—å, —á—Ç–æ –Ω–∞—á–∞–ª polling.

## –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –∞–¥–º–∏–Ω–∫—É/–æ—Ç—á—ë—Ç—ã –∑–∞ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –∏ —ç–∫—Å–ø–æ—Ä—Ç –≤ XLSX/CSV
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é/–ø—Ä–∏–≤—è–∑–∫—É –∫ —É—á–µ–Ω–∏–∫–∞–º Tomorrow School
- –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–µ–±—Ö—É–∫–∏ –∏ autoscale (–Ω–∞–ø—Ä–∏–º–µ—Ä, Railway ‚Üí Render ‚Üí Fly)
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã—Ö —Å–µ—Å—Å–∏—è—Ö —á–µ—Ä–µ–∑ scheduled jobs/webhooks
